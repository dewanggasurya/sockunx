{
  // See https://go.microsoft.com/fwlink/?LinkId=733558
  // for the documentation about the tasks.json format
  "version": "2.0.0",
  "tasks": [
    {
      "label": "1 Run NATS",
      "detail": "NATS is used as service communication",
      "type": "process",
      "command": "nats-streaming-server",
      "args": ["-V"],
      "problemMatcher": []
    },
    {
      "label": "2 Run Caddy",
      "detail": "Caddy server is used as service routing",
      "type": "process",
      "command": "caddy",
      "args": ["run", "--config=config/Caddyfile"],
      "problemMatcher": []
    },
    {
      "label": "# Run Microservices Depedencies",
      "detail": "Run NATS and Caddy, both are used as microservice depedencies",
      "dependsOn": ["1 Run NATS", "2 Run Caddy"],
      "presentation": {
        "reveal": "never",
        "panel": "shared",
        "focus": false,
        "group": "Microservices Dependencies",
        "showReuseMessage": false
      },
      "problemMatcher": []
    },
    // {
    //   "label": "# Run Webs",
    //   "detail": "Run admin and public webs",
    //   "dependsOn": ["3 Run Web Admin", "4 Run Web Evensio"],
    //   "presentation": {
    //     "reveal": "never",
    //     "panel": "shared",
    //     "focus": false,
    //     "group": "Webs",
    //     "showReuseMessage": false
    //   },
    //   "problemMatcher": []
    // },
    {
      "label": "3 Run Web App",
      "detail": "Run web app",
      "type": "shell",
      "command": "yarn run dev:app",
      "problemMatcher": [],
      "options": {
        "cwd": "${workspaceFolder}"
      }
    },
    // {
    //   "label": "4 Run Web Evensio",
    //   "detail": "Run app public web app",
    //   "type": "shell",
    //   "command": "yarn run dev:public",
    //   "problemMatcher": [],
    //   "options": {
    //     "cwd": "${workspaceFolder}"
    //   }
    // },
    {
      "label": "Delay",
      "type": "shell",
      "command": "sleep 2",
      "windows": {
        "command": "ping 127.0.0.1 -n 2 > NUL"
      },
      "group": "none",
      "presentation": {
        "reveal": "never",
        "panel": "shared",
        "echo": false,
        "close": true,
        "showReuseMessage": false
      },
      "problemMatcher": []
    },
    // {
    //   "label": "4 Run Xendit - Ngrok",
    //   "detail": "Run ngrok for xendit callback tunnel",
    //   "type": "shell",
    //   "command": "ngrok",
    //   "args": ["http", "38006"],
    //   "problemMatcher": []
    // },
    // {
    //   "label": "5 Run Xendit - Localtunnel",
    //   "detail": "Run localtunnel for xendit callback tunnel",
    //   "type": "shell",
    //   "command": "lt",
    //   "args": ["-p", "38006", "-s", "kano-xendit-${env:USERNAME}"],
    //   "problemMatcher": []
    // },
    // {
    //   "label": "6 Run Sosiogram - Ngrok",
    //   "detail": "Run ngrok for sosiogram callback tunnel",
    //   "type": "shell",
    //   "command": "ngrok",
    //   "args": ["http", "38208"],
    //   "problemMatcher": []
    // },
    // {
    //   "label": "7 Run Sosiogram - Localtunnel",
    //   "detail": "Run localtunnel for sosiogram callback tunnel",
    //   "type": "shell",
    //   "command": "lt",
    //   "args": ["-p", "38208", "-s", "kano-sosiogram-${env:USERNAME}"],
    //   "problemMatcher": []
    // },
    {
      "label": "8 Generate swagger docs",
      "detail": "Generate swagger documentations",
      "type": "shell",
      "command": "time",
      "args": [
        "swag",
        "init",
        "-d",
        "services/account/",
        "--parseDependency",
        "--parseDepth=5",
        "--output",
        "./docs/swagger"
      ],
      "problemMatcher": []
    }
  ]
}
